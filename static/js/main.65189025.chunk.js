(this.webpackJsonpwordbubble=this.webpackJsonpwordbubble||[]).push([[0],{149:function(e,t,a){e.exports=a(189)},151:function(e,t,a){},189:function(e,t,a){"use strict";a.r(t);a(150),a(151);var n=a(0),r=a.n(n),c=a(76),s=a(14),o=a(28),l=a(2),i=a(1),u=a.n(i),m=a(9),d=a(77),f=a.n(d),p=a(78),b=a(79),h=a.n(b),v=a(80),E=a.n(v),x=a(4),w=p.loadLayersModel("word2vec/model.json"),y=fetch("vocabulary.json").then((function(e){return e.json()})),N=new Promise((function(e){f.a.builder({dicPath:"dict"}).build((function(t,a){e(a)}))})),g=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w;case 2:return a=e.sent,e.next=5,y;case 5:return n=e.sent,e.next=8,a.layers[3].getWeights()[0].transpose().array();case 8:return r=e.sent,e.abrupt("return",t.map((function(e){var t=e.word;return r[n[t]]})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N;case 2:return a=e.sent,e.next=5,y;case 5:return n=e.sent,e.abrupt("return",a.tokenize(t).map((function(e){return e.basic_form})).filter((function(e){return e in n})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){var t,a={},n=Object(l.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r in a||(a[r]=0),a[r]+=1}}catch(c){n.e(c)}finally{n.f()}return Object.entries(a).map((function(e){var t=Object(o.a)(e,2);return{word:t[0],count:t[1]}}))},O=function(e){var t=new h.a({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:200,metric:"euclidean"});return t.init({data:e,type:"dense"}),t.run(),t.getOutputScaled()},k=function(e,t){return E()(e,t).idxs},R=function(e){x.d(e).force("charge",x.c().strength(10)).force("collide",x.b().radius((function(e){return e.r+1})).iterations(30)).force("x",x.e(0)).force("y",x.f(0)).tick(100).stop()},C=function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n,r,c,s,o,l,i,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.numClusters,r=a.minR,c=a.maxR,console.time("preprocess"),e.t0=j,e.next=5,M(t);case 5:return e.t1=e.sent,s=(0,e.t0)(e.t1),console.timeEnd("preprocess"),console.time("inference"),e.next=11,g(s);case 11:return o=e.sent,console.timeEnd("inference"),console.time("dimensionalityReduction"),l=O(o),console.timeEnd("dimensionalityReduction"),console.time("clustering"),i=k(l,n),console.timeEnd("clustering"),m=x.h().domain(x.a(s,(function(e){return e.count}))).range([r,c]),s.forEach((function(e,t){e.x=e.x0=600*l[t][0],e.y=e.y0=600*l[t][1],e.group=i[t],e.r=m(e.count)})),console.time("improveLayout"),R(s),console.timeEnd("improveLayout"),e.abrupt("return",s);case 25:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=function(e,t,a,n){var r=document.createElementNS("http://www.w3.org/2000/svg","text");r.textContent=e,r.setAttributeNS(null,"font-family",a),r.setAttributeNS(null,"font-weight",n);var c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.appendChild(r),document.body.appendChild(c);for(var s=0,o=100,l=0;l<10;++l){var i=(s+o)/2;r.setAttributeNS(null,"font-size",i);var u=r.getBBox(),m=u.width,d=u.height;Math.sqrt(Math.pow(m,2)+Math.pow(d,2))/2<=t?s=i:o=i}return document.body.removeChild(c),s},A=function(e){var t=e.words,a=10,n=10,c=600+n+10,o=600+a+10,l=300/Math.max.apply(Math,[Math.abs(Math.min.apply(Math,Object(s.a)(t.map((function(e){return e.x-e.r}))))),Math.abs(Math.max.apply(Math,Object(s.a)(t.map((function(e){return e.x+e.r}))))),Math.abs(Math.min.apply(Math,Object(s.a)(t.map((function(e){return e.y-e.r}))))),Math.abs(Math.max.apply(Math,Object(s.a)(t.map((function(e){return e.y+e.r})))))]),i=x.g(x.i);return r.a.createElement("svg",{className:"chart",viewBox:"0 0 ".concat(c," ").concat(o)},r.a.createElement("g",{transform:"translate(".concat(n,",").concat(a,")")},r.a.createElement("g",{transform:"translate(".concat(300,",").concat(300,")")},t.map((function(e){return r.a.createElement("g",{key:e.word,transform:"translate(".concat(e.x*l,",").concat(e.y*l,")scale(").concat(l,")")},r.a.createElement("circle",{r:e.r,fill:i(e.group)}),r.a.createElement("text",{fill:"ghostwhite",fontSize:S(e.word,e.r),fontFamily:"'Sawarabi Gothic', sans-serif",fontWeight:"normal",textAnchor:"middle",dominantBaseline:"central"},e.word))})))))},B=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],s="\u65e5\u672c\u56fd\u6c11\u306f\u3001\u6b63\u5f53\u306b\u9078\u6319\u3055\u308c\u305f\u56fd\u4f1a\u306b\u304a\u3051\u308b\u4ee3\u8868\u8005\u3092\u901a\u3058\u3066\u884c\u52d5\u3057\u3001\u308f\u308c\u3089\u3068\u308f\u308c\u3089\u306e\u5b50\u5b6b\u306e\u305f\u3081\u306b\u3001\u8af8\u56fd\u6c11\u3068\u306e\u5354\u548c\u306b\u3088\u308b\u6210\u679c\u3068\u3001\u308f\u304c\u56fd\u5168\u571f\u306b\u308f\u305f\u3064\u3066\u81ea\u7531\u306e\u3082\u305f\u3089\u3059\u6075\u6ca2\u3092\u78ba\u4fdd\u3057\u3001\u653f\u5e9c\u306e\u884c\u70ba\u306b\u3088\u3064\u3066\u518d\u3073\u6226\u4e89\u306e\u60e8\u798d\u304c\u8d77\u308b\u3053\u3068\u306e\u306a\u3044\u3084\u3046\u306b\u3059\u308b\u3053\u3068\u3092\u6c7a\u610f\u3057\u3001\u3053\u3053\u306b\u4e3b\u6a29\u304c\u56fd\u6c11\u306b\u5b58\u3059\u308b\u3053\u3068\u3092\u5ba3\u8a00\u3057\u3001\u3053\u306e\u61b2\u6cd5\u3092\u78ba\u5b9a\u3059\u308b\u3002\u305d\u3082\u305d\u3082\u56fd\u653f\u306f\u3001\u56fd\u6c11\u306e\u53b3\u7c9b\u306a\u4fe1\u8a17\u306b\u3088\u308b\u3082\u306e\u3067\u3042\u3064\u3066\u3001\u305d\u306e\u6a29\u5a01\u306f\u56fd\u6c11\u306b\u7531\u6765\u3057\u3001\u305d\u306e\u6a29\u529b\u306f\u56fd\u6c11\u306e\u4ee3\u8868\u8005\u304c\u3053\u308c\u3092\u884c\u4f7f\u3057\u3001\u305d\u306e\u798f\u5229\u306f\u56fd\u6c11\u304c\u3053\u308c\u3092\u4eab\u53d7\u3059\u308b\u3002\u3053\u308c\u306f\u4eba\u985e\u666e\u904d\u306e\u539f\u7406\u3067\u3042\u308a\u3001\u3053\u306e\u61b2\u6cd5\u306f\u3001\u304b\u304b\u308b\u539f\u7406\u306b\u57fa\u304f\u3082\u306e\u3067\u3042\u308b\u3002\u308f\u308c\u3089\u306f\u3001\u3053\u308c\u306b\u53cd\u3059\u308b\u4e00\u5207\u306e\u61b2\u6cd5\u3001\u6cd5\u4ee4\u53ca\u3073\u8a54\u52c5\u3092\u6392\u9664\u3059\u308b\u3002\n\u3000\u65e5\u672c\u56fd\u6c11\u306f\u3001\u6052\u4e45\u306e\u5e73\u548c\u3092\u5ff5\u9858\u3057\u3001\u4eba\u9593\u76f8\u4e92\u306e\u95a2\u4fc2\u3092\u652f\u914d\u3059\u308b\u5d07\u9ad8\u306a\u7406\u60f3\u3092\u6df1\u304f\u81ea\u899a\u3059\u308b\u306e\u3067\u3042\u3064\u3066\u3001\u5e73\u548c\u3092\u611b\u3059\u308b\u8af8\u56fd\u6c11\u306e\u516c\u6b63\u3068\u4fe1\u7fa9\u306b\u4fe1\u983c\u3057\u3066\u3001\u308f\u308c\u3089\u306e\u5b89\u5168\u3068\u751f\u5b58\u3092\u4fdd\u6301\u3057\u3088\u3046\u3068\u6c7a\u610f\u3057\u305f\u3002\u308f\u308c\u3089\u306f\u3001\u5e73\u548c\u3092\u7dad\u6301\u3057\u3001\u5c02\u5236\u3068\u96b7\u5f93\u3001\u5727\u8feb\u3068\u504f\u72ed\u3092\u5730\u4e0a\u304b\u3089\u6c38\u9060\u306b\u9664\u53bb\u3057\u3088\u3046\u3068\u52aa\u3081\u3066\u3090\u308b\u56fd\u969b\u793e\u4f1a\u306b\u304a\u3044\u3066\u3001\u540d\u8a89\u3042\u308b\u5730\u4f4d\u3092\u5360\u3081\u305f\u3044\u3068\u601d\u3075\u3002\u308f\u308c\u3089\u306f\u3001\u5168\u4e16\u754c\u306e\u56fd\u6c11\u304c\u3001\u3072\u3068\u3057\u304f\u6050\u6016\u3068\u6b20\u4e4f\u304b\u3089\u514d\u304b\u308c\u3001\u5e73\u548c\u306e\u3046\u3061\u306b\u751f\u5b58\u3059\u308b\u6a29\u5229\u3092\u6709\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n\u308f\u308c\u3089\u306f\u3001\u3044\u3065\u308c\u306e\u56fd\u5bb6\u3082\u3001\u81ea\u56fd\u306e\u3053\u3068\u306e\u307f\u306b\u5c02\u5ff5\u3057\u3066\u4ed6\u56fd\u3092\u7121\u8996\u3057\u3066\u306f\u306a\u3089\u306a\u3044\u306e\u3067\u3042\u3064\u3066\u3001\u653f\u6cbb\u9053\u5fb3\u306e\u6cd5\u5247\u306f\u3001\u666e\u904d\u7684\u306a\u3082\u306e\u3067\u3042\u308a\u3001\u3053\u306e\u6cd5\u5247\u306b\u5f93\u3075\u3053\u3068\u306f\u3001\u81ea\u56fd\u306e\u4e3b\u6a29\u3092\u7dad\u6301\u3057\u3001\u4ed6\u56fd\u3068\u5bfe\u7b49\u95a2\u4fc2\u306b\u7acb\u305f\u3046\u3068\u3059\u308b\u5404\u56fd\u306e\u8cac\u52d9\u3067\u3042\u308b\u3068\u4fe1\u305a\u308b\u3002\n\n\u65e5\u672c\u56fd\u6c11\u306f\u3001\u56fd\u5bb6\u306e\u540d\u8a89\u306b\u304b\u3051\u3001\u5168\u529b\u3092\u3042\u3052\u3066\u3053\u306e\u5d07\u9ad8\u306a\u7406\u60f3\u3068\u76ee\u7684\u3092\u9054\u6210\u3059\u308b\u3053\u3068\u3092\u8a93\u3075\u3002";return Object(n.useEffect)((function(){Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,C(s,{minR:6,maxR:30,numClusters:5});case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[s,5]),r.a.createElement("div",null,r.a.createElement("section",{className:"hero is-dark"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},"Semantic Preserving Word Bubbles"),r.a.createElement("h2",{className:"subtitle"},"As an Alternative to WordClouds for Text Visualization")))),r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target.elements.text.value,n=+t.target.elements.numClusters.value,r=+t.target.elements.minR.value,s=+t.target.elements.maxR.value,e.t0=c,e.next=8,C(a,{numClusters:n,minR:r,maxR:s});case 8:e.t1=e.sent,(0,e.t0)(e.t1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Input Text"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{name:"text",className:"textarea",defaultValue:s}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Number of Clusters"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"numClusters",type:"number",min:"0",max:"10",defaultValue:5,className:"input"}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Minimum Radius"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"minR",type:"number",min:"0",defaultValue:6,className:"input"}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Maximum Radius"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"maxR",type:"number",min:"0",defaultValue:30,className:"input"}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-dark",type:"submit"},"Visualize")))))),r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement(A,{words:a}))),r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/likr-sandbox/wordbubble",target:"_blank",rel:"noopener noreferrer"},"view source code")),r.a.createElement("p",null,"\xa9 2020 Yosuke Onoue"))))};Object(c.render)(r.a.createElement(B,null),document.getElementById("content"))},78:function(e,t){e.exports=window.tf}},[[149,1,2]]]);
//# sourceMappingURL=main.65189025.chunk.js.map